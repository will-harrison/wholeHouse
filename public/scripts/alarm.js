// Generated by CoffeeScript 1.6.3
(function() {
  var howler, moment, _;

  _ = require('underscore');

  howler = require('//cdnjs.cloudflare.com/ajax/libs/howler/1.1.17/howler.min.js');

  moment = require('moment');

  exports.create = function(options) {
    var alarm, alarmTime, back, goBack, ratio, ringRatios, ringTime, settings, _i, _len;
    settings = {
      alarmTime: moment().add(30, "minutes"),
      goBack: moment.duration(30, "minutes"),
      repeat: false,
      frequency: moment.duration(1, "day")
    };
    _.extend(settings, options);
    ringRatios = [0.38, 0.618421052631579, 0.624113475177305, 0.613636363636364, 0.62962962962963, 0.617647058823529, 0.619047619047619, 0.615384615384615, 0.625, 0];
    goBack = [settings.goBack];
    alarmTime = settings.alarmTime;
    for (_i = 0, _len = ringRatios.length; _i < _len; _i++) {
      ratio = ringRatios[_i];
      goBack.push(moment.duration(_.last(goBack).valueOf() * ratio));
    }
    ringTime = (function() {
      var _j, _len1, _results;
      _results = [];
      for (_j = 0, _len1 = goBack.length; _j < _len1; _j++) {
        back = goBack[_j];
        _results.push(moment(alarmTime - back.valueOf()).toDate());
      }
      return _results;
    })();
    alarm = {
      start: function() {
        return ringTime;
      },
      stop: function() {}
    };
    return alarm;
  };

}).call(this);
